[{"/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/index.js":"1","/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/App.js":"2","/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/serviceWorker.js":"3","/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/ConversationsApp.js":"4","/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/HeaderItem.js":"5","/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/Conversation.js":"6","/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/ConversationsList.js":"7","/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/LoginPage.jsx":"8","/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/ConversationsMessages.js":"9","/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/MessageBubble.js":"10","/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/utils/class-name.js":"11","/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/WhatsappIcon.js":"12","/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/ChatIcon.js":"13"},{"size":458,"mtime":1627374611879,"results":"14","hashOfConfig":"15"},{"size":319,"mtime":1627374611866,"results":"16","hashOfConfig":"15"},{"size":4812,"mtime":1627374611879,"results":"17","hashOfConfig":"15"},{"size":6670,"mtime":1627383678922,"results":"18","hashOfConfig":"15"},{"size":237,"mtime":1627374611870,"results":"19","hashOfConfig":"15"},{"size":5746,"mtime":1627374611868,"results":"20","hashOfConfig":"15"},{"size":1811,"mtime":1627374611869,"results":"21","hashOfConfig":"15"},{"size":3024,"mtime":1627383301932,"results":"22","hashOfConfig":"15"},{"size":798,"mtime":1627374611870,"results":"23","hashOfConfig":"15"},{"size":4106,"mtime":1627374611872,"results":"24","hashOfConfig":"15"},{"size":96,"mtime":1627374611880,"results":"25","hashOfConfig":"15"},{"size":1465,"mtime":1627374611873,"results":"26","hashOfConfig":"15"},{"size":2400,"mtime":1627374611868,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"1n40rb",{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"42","usedDeprecatedRules":"30"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"30"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/index.js",[],["58","59"],"/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/App.js",[],"/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/serviceWorker.js",[],"/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/ConversationsApp.js",["60"],"import React from \"react\";\nimport { Badge, Icon, Layout, Spin, Typography } from \"antd\";\nimport { Client as ConversationsClient } from \"@twilio/conversations\";\n\nimport \"./assets/Conversation.css\";\nimport \"./assets/ConversationSection.css\";\nimport { ReactComponent as Logo } from \"./assets/twilio-mark-red.svg\";\n\nimport Conversation from \"./Conversation\";\nimport LoginPage from \"./LoginPage\";\nimport { ConversationsList } from \"./ConversationsList\";\nimport { HeaderItem } from \"./HeaderItem\";\n\nconst { Content, Sider, Header } = Layout;\nconst { Text } = Typography;\n\nclass ConversationsApp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const name = localStorage.getItem(\"name\") || \"\";\n    const token = localStorage.getItem(\"token\") || \"\";\n    const loggedIn = name !== \"\";\n\n    this.state = {\n      name,\n      loggedIn,\n      token,\n      statusString: null,\n      conversationsReady: false,\n      conversations: [],\n      selectedConversationSid: null,\n      newMessage: \"\"\n    };\n  }\n\n  componentDidMount = () => {\n    if (this.state.loggedIn) {\n      this.setState({ statusString: \"Fetching credentials…\" });\n    }\n  };\n\n  logIn = (name, token) => {\n    if (name !== \"\") {\n      localStorage.setItem(\"name\", name);\n      this.setState({ name, loggedIn: true });\n    }\n    if (token !== \"\") {\n      localStorage.setItem(\"token\", token);\n      this.setState({ token }, this.initConversations);\n    }\n  };\n\n  logOut = (event) => {\n    if (event) {\n      event.preventDefault();\n    }\n\n    this.setState({\n      name: \"\",\n      loggedIn: false,\n      token: \"\",\n      conversationsReady: false,\n      messages: [],\n      newMessage: \"\",\n      conversations: []\n    });\n\n    localStorage.removeItem(\"name\");\n    this.conversationsClient.shutdown();\n  };\n\n  initConversations = async () => {\n    window.conversationsClient = ConversationsClient;\n    this.conversationsClient = await ConversationsClient.create(\n      this.state.token\n    );\n    this.setState({ statusString: \"Connecting to Twilio…\" });\n\n    this.conversationsClient.on(\"connectionStateChanged\", (state) => {\n      if (state === \"connecting\")\n        this.setState({\n          statusString: \"Connecting to Twilio…\",\n          status: \"default\"\n        });\n      if (state === \"connected\") {\n        this.setState({\n          statusString: \"You are connected.\",\n          status: \"success\"\n        });\n      }\n      if (state === \"disconnecting\")\n        this.setState({\n          statusString: \"Disconnecting from Twilio…\",\n          conversationsReady: false,\n          status: \"default\"\n        });\n      if (state === \"disconnected\")\n        this.setState({\n          statusString: \"Disconnected.\",\n          conversationsReady: false,\n          status: \"warning\"\n        });\n      if (state === \"denied\")\n        this.setState({\n          statusString: \"Failed to connect.\",\n          conversationsReady: false,\n          status: \"error\"\n        });\n    });\n    this.conversationsClient.on(\"conversationJoined\", (conversation) => {\n      this.setState({\n        conversations: [...this.state.conversations, conversation]\n      });\n    });\n    this.conversationsClient.on(\"conversationLeft\", (thisConversation) => {\n      this.setState({\n        conversations: [\n          ...this.state.conversations.filter((it) => it !== thisConversation)\n        ]\n      });\n    });\n  };\n\n  render() {\n    const { conversations, selectedConversationSid, status } = this.state;\n    const selectedConversation = conversations.find(\n      (it) => it.sid === selectedConversationSid\n    );\n\n    let conversationContent;\n    if (selectedConversation) {\n      conversationContent = (\n        <Conversation\n          conversationProxy={selectedConversation}\n          myIdentity={this.state.name}\n        />\n      );\n    } else if (status !== \"success\") {\n      conversationContent = \"Loading your conversation!\";\n    } else {\n      conversationContent = \"\";\n    }\n\n    if (this.state.loggedIn) {\n      return (\n        <div className=\"conversations-window-wrapper\">\n          <Layout className=\"conversations-window-container\">\n            <Header\n              style={{ display: \"flex\", alignItems: \"center\", padding: 0 }}\n            >\n              <div\n                style={{\n                  maxWidth: \"250px\",\n                  width: \"100%\",\n                  display: \"flex\",\n                  alignItems: \"center\"\n                }}\n              >\n                <HeaderItem style={{ paddingRight: \"0\", display: \"flex\" }}>\n                  <Logo />\n                </HeaderItem>\n                <HeaderItem>\n                  <Text strong style={{ color: \"white\" }}>\n                    Conversations\n                  </Text>\n                </HeaderItem>\n              </div>\n              <div style={{ display: \"flex\", width: \"100%\" }}>\n                <HeaderItem>\n                  <Text strong style={{ color: \"white\" }}>\n                    {selectedConversation &&\n                      (selectedConversation.friendlyName ||\n                        selectedConversation.sid)}\n                  </Text>\n                </HeaderItem>\n                <HeaderItem style={{ float: \"right\", marginLeft: \"auto\" }}>\n                  <span\n                    style={{ color: \"white\" }}\n                  >{` ${this.state.statusString}`}</span>\n                  <Badge\n                    dot={true}\n                    status={this.state.status}\n                    style={{ marginLeft: \"1em\" }}\n                  />\n                </HeaderItem>\n                <HeaderItem>\n                  <Icon\n                    type=\"poweroff\"\n                    onClick={this.logOut}\n                    style={{\n                      color: \"white\",\n                      fontSize: \"20px\",\n                      marginLeft: \"auto\"\n                    }}\n                  />\n                </HeaderItem>\n              </div>\n            </Header>\n            <Layout>\n              <Sider theme={\"light\"} width={250}>\n                <ConversationsList\n                  conversations={conversations}\n                  selectedConversationSid={selectedConversationSid}\n                  onConversationClick={(item) => {\n                    this.setState({ selectedConversationSid: item.sid });\n                  }}\n                />\n              </Sider>\n              <Content className=\"conversation-section\">\n                <div id=\"SelectedConversation\">{conversationContent}</div>\n              </Content>\n            </Layout>\n          </Layout>\n        </div>\n      );\n    }\n\n    return <LoginPage onSubmit={this.logIn} />;\n  }\n}\n\nexport default ConversationsApp;\n","/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/HeaderItem.js",[],"/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/Conversation.js",["61"],"import React, { Component } from 'react';\nimport './assets/Conversation.css';\nimport MessageBubble from './MessageBubble'\nimport Dropzone from 'react-dropzone';\nimport styles from './assets/Conversation.module.css'\nimport {Button, Form, Icon, Input} from \"antd\";\nimport ConversationsMessages from \"./ConversationsMessages\";\nimport PropTypes from \"prop-types\";\n\nclass Conversation extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n        newMessage: '',\n        conversationProxy: props.conversationProxy,\n        messages: [],\n        loadingState: 'initializing',\n        boundConversations: new Set()\n    };\n  }\n\n  loadMessagesFor = (thisConversation) => {\n    if (this.state.conversationProxy === thisConversation) {\n        thisConversation.getMessages()\n            .then(messagePaginator => {\n                if (this.state.conversationProxy === thisConversation) {\n                    this.setState({ messages: messagePaginator.items, loadingState: 'ready' });\n                }\n            })\n            .catch(err => {\n                console.error(\"Couldn't fetch messages IMPLEMENT RETRY\", err);\n                this.setState({ loadingState: \"failed\" });\n            });\n    }\n  };\n\n  componentDidMount = () => {\n      if (this.state.conversationProxy) {\n        this.loadMessagesFor(this.state.conversationProxy);\n\n        if (!this.state.boundConversations.has(this.state.conversationProxy)) {\n            let newConversation = this.state.conversationProxy;\n            newConversation.on('messageAdded', m => this.messageAdded(m, newConversation));\n            this.setState({boundConversations: new Set([...this.state.boundConversations, newConversation])});\n        }\n      }\n  }\n\n  componentDidUpdate = (oldProps, oldState) => {\n    if (this.state.conversationProxy !== oldState.conversationProxy) {\n        this.loadMessagesFor(this.state.conversationProxy);\n\n        if (!this.state.boundConversations.has(this.state.conversationProxy)) {\n            let newConversation = this.state.conversationProxy;\n            newConversation.on('messageAdded', m => this.messageAdded(m, newConversation));\n            this.setState({boundConversations: new Set([...this.state.boundConversations, newConversation])});\n        }\n    }\n  };\n\n  static getDerivedStateFromProps(newProps, oldState) {\n    let logic = (oldState.loadingState === 'initializing') || oldState.conversationProxy !== newProps.conversationProxy;\n    if (logic) {\n      return { loadingState: 'loading messages', conversationProxy: newProps.conversationProxy };\n    } else {\n      return null;\n    }\n  }\n\n  messageAdded = (message, targetConversation) => {\n    if (targetConversation === this.state.conversationProxy)\n        this.setState((prevState, props) => ({\n            messages: [...prevState.messages, message]\n        }));\n  };\n\n  onMessageChanged = event => {\n    this.setState({ newMessage: event.target.value });\n  };\n\n  sendMessage = event => {\n    event.preventDefault();\n    const message = this.state.newMessage;\n    this.setState({ newMessage: '' });\n    this.state.conversationProxy.sendMessage(message);\n  };\n\n  onDrop = acceptedFiles => {\n    this.state.conversationProxy.sendMessage({contentType: acceptedFiles[0].type, media: acceptedFiles[0]});\n  };\n\n  render = () => {\n    return (\n        <Dropzone\n            onDrop={this.onDrop}\n            accept=\"image/*\">\n          {({getRootProps, getInputProps, isDragActive}) => (\n              <div\n                  {...getRootProps()}\n                  onClick={() => {\n                  }}\n                  id=\"OpenChannel\"\n                  style={{position: \"relative\", top: 0}}>\n\n                {isDragActive &&\n                <div className={styles.drop}>\n                  <Icon type={\"cloud-upload\"}\n                        style={{fontSize: \"5em\", color: \"#fefefe\"}}/>\n                  <h3 style={{color: \"#fefefe\"}}>Release to Upload</h3>\n                </div>\n                }\n                <div\n                    className={styles.messages}\n                    style={{\n                      filter: `blur(${isDragActive ? 4 : 0}px)`,\n                    }}\n                >\n                  <input id=\"files\" {...getInputProps()} />\n                  <div style={{flexBasis: \"100%\", flexGrow: 2, flexShrink: 1, overflowY: \"scroll\"}}>\n                    <ConversationsMessages\n                        identity={this.props.myIdentity}\n                        messages={this.state.messages}/>\n                  </div>\n                  <div>\n                    <Form onSubmit={this.sendMessage}>\n                      <Input.Group compact={true} style={{\n                        width: \"100%\",\n                        display: \"flex\",\n                        flexDirection: \"row\"\n                      }}>\n                        <Input\n                            style={{flexBasis: \"100%\"}}\n                            placeholder={\"Type your message here...\"}\n                            type={\"text\"}\n                            name={\"message\"}\n                            id={styles['type-a-message']}\n                            autoComplete={\"off\"}\n                            disabled={this.state.loadingState !== 'ready'}\n                            onChange={this.onMessageChanged}\n                            value={this.state.newMessage}\n                        />\n                        <Button icon=\"enter\" htmlType=\"submit\" type={\"submit\"}/>\n                      </Input.Group>\n                    </Form>\n                  </div>\n                </div>\n              </div>\n          )}\n\n        </Dropzone>\n    );\n  }\n}\n\nConversation.propTypes = {\n  myIdentity: PropTypes.string.isRequired\n};\n\nexport default Conversation;","/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/ConversationsList.js",[],"/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/LoginPage.jsx",[],"/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/ConversationsMessages.js",[],"/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/MessageBubble.js",["62"],"import React, { Component, PureComponent } from \"react\";\nimport styles from \"./assets/MessageBubble.module.css\";\nimport PropTypes from \"prop-types\";\nimport { Spin, Modal, Icon } from \"antd\";\nimport WhatsappIcon from \"./WhatsappIcon\";\nimport ChatIcon from \"./ChatIcon\";\n\nclass MessageBubble extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hasMedia: this.props.message.type === \"media\",\n      mediaDownloadFailed: false,\n      mediaUrl: null\n    };\n  }\n\n  componentDidMount = async () => {\n    this.setState({\n      ...this.state,\n      type: (await this.props.message.getParticipant()).type\n    });\n    if (this.state.hasMedia) {\n      this.props.message.media\n        .getContentTemporaryUrl()\n        .then((url) => {\n          this.setState({ mediaUrl: url });\n        })\n        .catch((e) => this.setState({ mediaDownloadFailed: true }));\n    }\n    document\n      .getElementById(this.props.message.sid)\n      .scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    document\n      .getElementById(this.props.message.sid)\n      .scrollIntoView({ behavior: \"smooth\" });\n  }\n\n  render = () => {\n    const { itemStyle, divStyle } =\n      this.props.direction === \"incoming\"\n        ? {\n            itemStyle: styles.received_msg,\n            divStyle: styles.received_withd_msg\n          }\n        : { itemStyle: styles.outgoing_msg, divStyle: styles.sent_msg };\n\n    const m = this.props.message;\n    const type = this.state.type;\n\n    if (this.state.hasMedia) {\n      console.log(\"Message is media message\");\n      // log media properties\n      console.log(\"Media properties\", m.media);\n    }\n    console.log(m);\n    return (\n      <li id={m.sid} className={itemStyle}>\n        <div className={divStyle}>\n          <div>\n            <strong>\n              {type === \"whatsapp\" && (\n                <Icon style={{ fontSize: \"16px\" }} component={WhatsappIcon} />\n              )}\n              {type === \"chat\" && (\n                <Icon style={{ fontSize: \"16px\" }} component={ChatIcon} />\n              )}\n              {type === \"sms\" && <Icon type={\"mobile\"} />}\n              {` ${m.author}`}\n            </strong>\n\n            <br />\n            <div className={styles.medias}>\n              {this.state.hasMedia && (\n                <Media\n                  hasFailed={this.state.mediaDownloadFailed}\n                  url={this.state.mediaUrl}\n                />\n              )}\n            </div>\n            {m.body}\n          </div>\n          <span className={styles.time_date}>\n            {m.state.timestamp.toLocaleString()}\n          </span>\n        </div>\n      </li>\n    );\n  };\n}\n\nclass Media extends PureComponent {\n  render = () => {\n    const { hasFailed, url } = this.props;\n    return (\n      <div\n        className={`${styles.media}${!url ? \" \" + styles.placeholder : \"\"}`}\n        onClick={() => {\n          Modal.info({\n            centered: true,\n            icon: null,\n            okText: \"Close\",\n            width: \"60%\",\n            content: (\n              <div className={styles.picture_container}>\n                <img style={{ width: \"100%\", height: \"100%\" }} src={url} />\n              </div>\n            )\n          });\n        }}\n      >\n        {!url && !hasFailed && <Spin />}\n\n        {hasFailed && (\n          <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n            <Icon type={\"warning\"} style={{ fontSize: \"5em\" }} />\n            <p>Failed to load media</p>\n          </div>\n        )}\n\n        {!hasFailed && url && (\n          <div className={styles.media_icon}>\n            <div style={{ zIndex: 123, position: \"absolute\" }}>\n              <Icon type={\"eye\"} style={{ fontSize: \"5em\", opacity: 0.3 }} />\n            </div>\n            <div\n              className={styles.picture_preview}\n              style={{ backgroundImage: `url(${url})`, zIndex: 122 }}\n            ></div>\n          </div>\n        )}\n      </div>\n    );\n  };\n}\n\nMedia.propTypes = {\n  hasFailed: PropTypes.bool.isRequired,\n  url: PropTypes.string\n};\n\nexport default MessageBubble;\n","/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/utils/class-name.js",[],"/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/WhatsappIcon.js",[],"/Users/admin/Desktop/GitHubSourceCode/chat-demo/src/ChatIcon.js",[],{"ruleId":"63","replacedBy":"64"},{"ruleId":"65","replacedBy":"66"},{"ruleId":"67","severity":1,"message":"68","line":2,"column":31,"nodeType":"69","messageId":"70","endLine":2,"endColumn":35},{"ruleId":"67","severity":1,"message":"71","line":3,"column":8,"nodeType":"69","messageId":"70","endLine":3,"endColumn":21},{"ruleId":"72","severity":1,"message":"73","line":110,"column":17,"nodeType":"74","endLine":110,"endColumn":76},"no-native-reassign",["75"],"no-negated-in-lhs",["76"],"no-unused-vars","'Spin' is defined but never used.","Identifier","unusedVar","'MessageBubble' is defined but never used.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","no-global-assign","no-unsafe-negation"]